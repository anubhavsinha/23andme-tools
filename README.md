# 23andMe Tools - Convert your 23andMe genotypes to VCF files

This repository provides a Java implementation to convert 23andMe genotype data into compressed VCFs (vcf.gz). VCF files can be useful for **imputation** with the [Michigan Imputation Server](https://imputationserver.sph.umich.edu) or for **mitochondrial haplogroup classification** with [HaploGrep](http://haplogrep.uibk.ac.at).
Credits to the perl implementation by [arrogantrobot](https://github.com/arrogantrobot/23andme2vcf).

2 tools are provided:

* **site-generator**: Creating a chip-specific file for your 23andMe data. This step is only required if the chip file is not included in this repository (see below for details). 
* **vcf-generator**: Generates a list of VCF files out of your 23andMe data. Each chromosome (chr1-22,X,Y,MT) is written to a seperate file.

## Download your data
Your personal genome can be downloaded from [here](https://www.23andme.com/you/download). After entering your secure answer, the complete dataset can be downloaded at once.

## Generate the chip sites
**If your data has been genotyped with the v4 genotyping chip (> Nov 2013), you can skip this step and go directly to the ```vcf-generator```**. For older chip versions (v1-v3) we would very much appreciate pull requests. 

```bash
git clone https://github.com/seppinho/23andme-tools.git
cd 23andme-tools
mvn install
java -jar vcf-tools-0.1.jar site-generator --ref human_g1k_v37.fasta --genome <your-genome.txt> --out <chip-version.txt>

```
The human_g1k_v37.fasta file is not included in this repository but can be downloaded like this:

```bash
wget ftp://ftp.1000genomes.ebi.ac.uk/vol1/ftp/technical/reference/human_g1k_v37.fasta.gz
wget ftp://ftp.1000genomes.ebi.ac.uk/vol1/ftp/technical/reference/human_g1k_v37.fasta.fai
gunzip human_g1k_v37.fasta.gz
```

## Generate VCF files
VCF files are generated by combining information from your 23andMe data with the provided chip list (v4 only). The v4 chip list (including 610544 sites) can be found [here](https://github.com/seppinho/23andme-tools/blob/master/files/23andme-v4-GRCh37-fwd.txt). 

```bash
git clone https://github.com/seppinho/23andme-tools.git
cd 23andme-tools
mvn install
java -jar vcf-tools-0.1.jar vcf-generator --genome <your-genome.txt> --chip <chip-version.txt> --chromosomes <set of chromosomes> --out <vcf-destination-folder>

```
## 23andMe Tools 101 

```bash
git clone https://github.com/seppinho/23andme-tools.git
cd 23andme-tools
mvn install
java -jar vcf-tools-0.1.jar site-generator --genome my-genome.txt --ref human_g1k_v37.fasta --out chip-v4.txt
java -jar vcf-tools-0.1.jar vcf-generator --genome my-genome.txt --chip chip-v4.txt --out vcfs


